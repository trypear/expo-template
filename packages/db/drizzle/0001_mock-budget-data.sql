-- Custom SQL migration file, put your code below! --

-- First, let's make sure we have at least one test user
INSERT INTO "user" (id, name, email, user_role)
VALUES 
  ('11111111-1111-1111-1111-111111111111', 'Test User', 'test@example.com', 'user')
ON CONFLICT DO NOTHING;

-- Insert categories
INSERT INTO "category" (id, name, type, icon, color)
VALUES
  -- Income categories
  ('20000000-0000-0000-0000-000000000001', 'Salary', 'income', 'cash', '#4CAF50'),
  ('20000000-0000-0000-0000-000000000002', 'Freelance', 'income', 'briefcase', '#8BC34A'),
  ('20000000-0000-0000-0000-000000000003', 'Investments', 'income', 'trending-up', '#009688'),
  
  -- Expense categories
  ('30000000-0000-0000-0000-000000000001', 'Housing', 'expense', 'home', '#F44336'),
  ('30000000-0000-0000-0000-000000000002', 'Food', 'expense', 'restaurant', '#FF9800'),
  ('30000000-0000-0000-0000-000000000003', 'Transportation', 'expense', 'car', '#FF5722'),
  ('30000000-0000-0000-0000-000000000004', 'Entertainment', 'expense', 'movie', '#9C27B0'),
  ('30000000-0000-0000-0000-000000000005', 'Shopping', 'expense', 'shopping-bag', '#E91E63'),
  ('30000000-0000-0000-0000-000000000006', 'Utilities', 'expense', 'zap', '#607D8B'),
  
  -- Savings categories
  ('40000000-0000-0000-0000-000000000001', 'Emergency Fund', 'savings', 'shield', '#2196F3'),
  ('40000000-0000-0000-0000-000000000002', 'Retirement', 'savings', 'trending-up', '#3F51B5'),
  ('40000000-0000-0000-0000-000000000003', 'Vacation', 'savings', 'umbrella', '#00BCD4');

-- Insert transactions for the test user
INSERT INTO "transaction" (id, user_id, category_id, amount, description, date)
VALUES
  -- Income transactions
  ('50000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '20000000-0000-0000-0000-000000000001', 5000.00, 'Monthly salary', '2025-05-01T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '20000000-0000-0000-0000-000000000002', 1200.00, 'Freelance project', '2025-05-10T00:00:00Z'),
  
  -- Expense transactions
  ('50000000-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000001', 1500.00, 'Rent payment', '2025-05-02T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000002', 350.00, 'Grocery shopping', '2025-05-05T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000002', 120.00, 'Dinner out', '2025-05-08T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000006', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000003', 200.00, 'Gas', '2025-05-07T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000007', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000004', 80.00, 'Movie tickets', '2025-05-12T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000008', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000005', 250.00, 'New clothes', '2025-05-15T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000009', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000006', 150.00, 'Electricity bill', '2025-05-20T00:00:00Z'),
  
  -- Savings transactions
  ('50000000-0000-0000-0000-000000000010', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000001', 500.00, 'Emergency fund contribution', '2025-05-01T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000011', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000002', 400.00, 'Retirement savings', '2025-05-01T00:00:00Z'),
  ('50000000-0000-0000-0000-000000000012', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000003', 200.00, 'Vacation fund', '2025-05-01T00:00:00Z');

-- Insert budget goals for the test user
INSERT INTO "budget_goal" (id, user_id, category_id, amount, period)
VALUES
  -- Monthly budget goals for expense categories
  ('60000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000001', 1500.00, 'monthly'),
  ('60000000-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000002', 600.00, 'monthly'),
  ('60000000-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000003', 300.00, 'monthly'),
  ('60000000-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000004', 200.00, 'monthly'),
  ('60000000-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000005', 300.00, 'monthly'),
  ('60000000-0000-0000-0000-000000000006', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000006', 200.00, 'monthly'),
  
  -- Yearly budget goals for savings categories
  ('60000000-0000-0000-0000-000000000007', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000001', 6000.00, 'yearly'),
  ('60000000-0000-0000-0000-000000000008', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000002', 4800.00, 'yearly'),
  ('60000000-0000-0000-0000-000000000009', '11111111-1111-1111-1111-111111111111', '40000000-0000-0000-0000-000000000003', 2400.00, 'yearly');

-- Insert monthly budgets for the test user (for May 2025)
INSERT INTO "monthly_budget" (id, user_id, category_id, amount, month, year)
VALUES
  ('70000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000001', 1500.00, 5, 2025),
  ('70000000-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000002', 600.00, 5, 2025),
  ('70000000-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000003', 300.00, 5, 2025),
  ('70000000-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000004', 200.00, 5, 2025),
  ('70000000-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000005', 300.00, 5, 2025),
  ('70000000-0000-0000-0000-000000000006', '11111111-1111-1111-1111-111111111111', '30000000-0000-0000-0000-000000000006', 200.00, 5, 2025);

-- Insert user preferences for the test user
INSERT INTO "user_preferences" (id, user_id, default_currency, month_start_day)
VALUES
  ('80000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', 'USD', 1)
ON CONFLICT (user_id) DO UPDATE
SET default_currency = EXCLUDED.default_currency, month_start_day = EXCLUDED.month_start_day;